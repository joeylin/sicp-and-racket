# P40-P74

## 1.2 过程和过程所产生的进程(Procedures and the Processes They Generate)

至此，通过一些数学运算的实例，我们已经初步了解了 1.1 中提到的程序的三种基本元素：

1. 基本算数操作符，如 `+ -` 和数字等；
2. 将这些操作组合成复合操作，如复杂运算`(+ 1 (- 2 3))`；
3. 通过抽象的方法将这些复合操作定义为复合过程，从而当做单独的个体被命名、操作。

> The ability to visualize the consequences of the actions under consideration is crucial to becoming an expert programmer.

如一开始所定义的，过程是计算过程(computational process)在局部范围内演化的一种描述，它描述了计算过程是如何在先前阶段的基础上一步一步向前演化。

本小节主要通过视觉“形状”的方式展示简单的过程所产生的计算过程是如何演化的，以及在计算过程中所消耗的时间、空间资源。

### 1.2.1 线性递归与循环（迭代）

#lang racket
(define (fact n)
(if (= n 1)
1
(* n (fact (- n 1)))))

(fact 6)
;=> 720
(define (fact-iter prod counter n)
(if (> counter n)
prod
(fact-iter (* prod counter) (+ counter 1) n)))
(define (fact-2 n)
(fact-iter 1 1 n))
(fact-2 6) 
;=> 720

第一种计算方法，先是扩展成一系列被延迟执行的操作（这里是乘法操作），然后真正计算的过程则是从展开的最终结果逐步缩减直至得出计算结果，这一类计算过程，称为**递归过程(recursive process)**，其中计算步骤的长度与参数`n`的大小线性相关，这类过程称为**线性递归过程(linear cursive process)**。

第二种计算方法，在每一步计算过程中，（通过参数传递）保存了`prod counter n`这些状态变量，这种则称为**迭代计算过程(iterative process)**，同样计算步骤的长度如果与参数`n`线性相关，则称为**线性迭代过程(linear iterative process)**。

> 当心递归计算过程(recursive process)与递归过程(recursive procedure)的区别。

> 这其实是从第一小节开始就应该注意到的一个问题，process 与 procedure 的区别，它们的意思相近，但是在本书的语境中需要区分开来。

> Process 更偏向于抽象的概念，它代表发生在背后的**计算过程**，它描绘的是发生在计算机中对其它一些抽象信息如数据的操作过程，如果把计算机程序（代码）比作是魔法师的咒语，那么计算过程(process)则意指咒语发生作用的过程。

> Procedure 则更偏向于具体的概念，它更多是指我们通过程序设计、由具体语法定义所产生的，指定计算机去完成的一系列指令，更像是魔法师真正念动的咒语。

> 因此递归计算过程(recursive process)是指背后的计算过程是递归的，呈现出线展开后缩减的“形状”；而递归过程(recursive procedure)则指其语法形式，**例如上例中第二种算法实际上一个线性迭代的计算过程，但它却是通过递归过程的语法来实现的**。

之所以需要着重区分计算过程(process)与过程(procedure)，是因为在许多其它编程语言（如C）的设计中，即使描述的计算过程是迭代的，如果其实现过程是迭代过程（如上例中第二种方法），那么也会像递归计算过程一样消耗等比例的资源（像第一种方法一样），从而不得不借助于一些特殊的语法结构如`while`等来定义迭代计算过程，而Scheme没有这一缺陷，因为它通过**尾递归(tail-recursive)**的方法能够通过递归过程，只消耗常量的资源，完成迭代计算过程。